{"mappings":"AAAA,MACMA,EAAU,CACdC,QAAS,CACP,YAAa,qCCAjB,MAAMC,EAAOC,SAASC,eAAe,QAC/BC,EAAcF,SAASC,eAAe,eAEtCE,EAAiB,IDCR,MAMbC,UACE,MAAMC,EAAM,uCAAiBC,KAAKC,+BAA+BD,KAAKE,OAEtE,OAAOC,MAAMJ,EAAKR,GACfa,MAAMC,GAAaA,EAASC,SAC5BF,MAAK,EAACG,SAAEA,MACPP,KAAKQ,WACED,I,CAIbC,WACER,KAAKE,MAAQ,C,CAEfO,YACET,KAAKE,KAAO,C,CApBdQ,cACEV,KAAKE,KAAO,EACZF,KAAKC,YAAc,E,GCHjBU,EAAc,ICPL,MAObC,UAAUC,GACR,OAAOnB,SAASoB,cAAcD,E,CAGhCE,OACEf,KAAKgB,OAAOC,UAAUC,IAAI,S,CAG5BC,OACEnB,KAAKgB,OAAOC,UAAUG,OAAO,S,CAG/BC,UACErB,KAAKgB,OAAOM,UAAW,EACvBtB,KAAKgB,OAAOO,YAAc,Y,CAE5BC,SACExB,KAAKgB,OAAOM,UAAW,EACvBtB,KAAKgB,OAAOO,YAAc,W,CAxB5Bb,aAAYG,SAAEA,EAAQY,SAAEA,IACtBzB,KAAKgB,OAAShB,KAAKY,UAAUC,GACzBY,EAAUzB,KAAKe,OACdf,KAAKmB,M,GDGsB,CAClCN,SAAU,YACVY,UAAU,IAuBZ,SAASC,IAGP,OAFAf,EAAYU,UAELxB,EACJC,UACAM,MAAMG,IACL,GAAwB,IAApBA,EAASoB,OAAc,MAAM,IAAIC,MAAM,WAE3C,OAAOrB,EAASsB,QACd,CAACC,EAAQC,IAmBjB,UAAsBC,OAAEA,EAAMC,MAAEA,EAAKC,YAAEA,EAAWC,IAAEA,EAAGC,WAAEA,IACvD,MAAO,gDAEMA,2DACiBH,0CACCD,GAAU,yDACLE,sBACxBC,oE,CA1BeE,CAAaN,GAAWD,GAC7C,GACD,IAEF1B,MAAM0B,IACLQ,EAAiBR,GACjBnB,EAAYa,QAAQ,IAErBe,MAAMC,E,CAGX,SAASF,EAAiBR,GACxBlC,EAAY6C,mBAAmB,YAAaX,E,CAmB9C,SAASU,EAAQE,GACfC,QAAQC,MAAMF,GACd/B,EAAYI,OACZuB,EAAiB,4B,CA5DnB7C,EAAKoD,iBAAiB,UAGtB,SAAkBC,GAChBA,EAAEC,iBAEF,MAAMC,EAAOF,EAAEG,cACTC,EAAQF,EAAKG,SAASC,KAAKF,MAAMG,OAEvCxD,EAAeI,YAAciD,EAE7BrD,EAAeY,YA+Bfb,EAAY0D,UAAY,GA7BxB3C,EAAYQ,OACZO,IAAgB6B,SAAQ,IAAMP,EAAKQ,S,IAbrC7C,EAAYK,OAAO6B,iBAAiB,QAASnB","sources":["src/js/news-wrapper/NewsApiService.js","src/js/news-wrapper/script.js","src/js/news-wrapper/LoadMoreBtn.js"],"sourcesContent":["const ENDPOINT = `https://newsapi.org/v2/everything`;\nconst options = {\n  headers: {\n    \"X-Api-Key\": \"dd82ff3604224bf1b224da3ef75c9135\",\n  },\n};\n\nexport default class NewsApiService {\n  constructor() {\n    this.page = 1;\n    this.searchQuery = \"\";\n  }\n\n  getNews() {\n    const URL = `${ENDPOINT}?q=${this.searchQuery}&pageSize=5&page=${this.page}`;\n\n    return fetch(URL, options)\n      .then((response) => response.json())\n      .then(({ articles }) => {\n        this.nextPage();\n        return articles;\n      });\n  }\n\n  nextPage() {\n    this.page += 1;\n  }\n  resetPage() {\n    this.page = 1;\n  }\n}\n","import NewsApiService from \"./NewsApiService.js\";\nimport LoadMoreBtn from \"./LoadMoreBtn.js\";\n\nconst form = document.getElementById(\"form\");\nconst newsWrapper = document.getElementById(\"newsWrapper\");\n\nconst newsApiService = new NewsApiService();\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: \"#loadMore\",\n  isHidden: true,\n});\n\n// console.log(newsApiService);\n// console.log(loadMoreBtn);\n\nform.addEventListener(\"submit\", onSubmit);\nloadMoreBtn.button.addEventListener(\"click\", fetchArticles);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  const form = e.currentTarget;\n  const value = form.elements.news.value.trim();\n\n  newsApiService.searchQuery = value;\n\n  newsApiService.resetPage();\n  clearNewsList();\n  loadMoreBtn.show();\n  fetchArticles().finally(() => form.reset());\n}\n\nfunction fetchArticles() {\n  loadMoreBtn.disable();\n\n  return newsApiService\n    .getNews()\n    .then((articles) => {\n      if (articles.length === 0) throw new Error(\"No data\");\n\n      return articles.reduce(\n        (markup, article) => createMarkup(article) + markup,\n        \"\"\n      );\n    })\n    .then((markup) => {\n      appendNewsToList(markup);\n      loadMoreBtn.enable();\n    })\n    .catch(onError);\n}\n\nfunction appendNewsToList(markup) {\n  newsWrapper.insertAdjacentHTML(\"beforeend\", markup);\n}\n\nfunction clearNewsList() {\n  newsWrapper.innerHTML = \"\";\n}\n\nfunction createMarkup({ author, title, description, url, urlToImage }) {\n  return `\n  <div class=\"article-card\">\n    <img src=${urlToImage} class=\"article-img\" />\n    <h2 class=\"article-title\">${title}</h2>\n    <h3 class=\"article-author\">${author || \"anonymous\"}</h3>\n    <p  class=\"article-description\">${description}</p>\n    <a href=${url} class=\"article-link\" target=\"_blank\">Read more</a>\n  </div>\n  `;\n}\n\nfunction onError(err) {\n  console.error(err);\n  loadMoreBtn.hide();\n  appendNewsToList(\"<p>Articles not found</p>\");\n}\n","export default class LoadMoreBtn {\n  constructor({ selector, isHidden }) {\n    this.button = this.getButton(selector);\n    if (isHidden) this.hide();\n    else this.show();\n  }\n\n  getButton(selector) {\n    return document.querySelector(selector);\n  }\n\n  hide() {\n    this.button.classList.add(\"hidden\");\n  }\n\n  show() {\n    this.button.classList.remove(\"hidden\");\n  }\n\n  disable() {\n    this.button.disabled = true;\n    this.button.textContent = \"Loading...\";\n  }\n  enable() {\n    this.button.disabled = false;\n    this.button.textContent = \"Load more\";\n  }\n}\n"],"names":["$78b77e5d3910a657$var$options","headers","$9b3667f11a9950d7$var$form","document","getElementById","$9b3667f11a9950d7$var$newsWrapper","$9b3667f11a9950d7$var$newsApiService","getNews","URL","this","searchQuery","page","fetch","then","response","json","articles","nextPage","resetPage","constructor","$9b3667f11a9950d7$var$loadMoreBtn","getButton","selector","querySelector","hide","button","classList","add","show","remove","disable","disabled","textContent","enable","isHidden","$9b3667f11a9950d7$var$fetchArticles","length","Error","reduce","markup","article","author","title","description","url","urlToImage","$9b3667f11a9950d7$var$createMarkup","$9b3667f11a9950d7$var$appendNewsToList","catch","$9b3667f11a9950d7$var$onError","insertAdjacentHTML","err","console","error","addEventListener","e","preventDefault","form1","currentTarget","value","elements","news","trim","innerHTML","finally","reset"],"version":3,"file":"news-wrapper.e7e57a93.js.map"}